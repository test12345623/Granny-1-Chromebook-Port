<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <title>Interactive Research Module</title>
</head>
<body style="margin: 0; background: #000; overflow: hidden; font-family: sans-serif;">

    <div id="start-overlay" style="position: absolute; width: 100%; height: 100%; background: #111; z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #fff;">
        <h2 style="margin-bottom: 20px;">Asset Loading System</h2>
        <button id="start-button" style="padding: 15px 30px; font-size: 18px; cursor: pointer; background: #444; color: white; border: 1px solid #777; border-radius: 4px;">
            INITIALIZE ASSETS
        </button>
    </div>

    <div id="unity-container" style="position: absolute; width: 100%; height: 100%;">
        <canvas id="unity-canvas" style="width: 100%; height: 100%; background: #222;"></canvas>
    </div>

    <script>
      // PASTE YOUR FILE IDs FROM GOOGLE DRIVE HERE
      var dataID = "18dXjpvrikxqQ4WJg3HgJ5OFWG5wDUlyI";
      var frameworkID = "1iAFVVUffuZ0t6tseosv15JAxOKwR33Er";
      var wasmID = "18eYBn_H9ahhObZZBUCejTICvNVfcZRZS";
      var loaderID = "1jdz-17FXdY0fUSDjEtGK05kHpXlm4EIO";

      var canvas = document.querySelector("#unity-canvas");
      var startOverlay = document.querySelector("#start-overlay");
      var startButton = document.querySelector("#start-button");

      var config = {
        dataUrl: "https://drive.google.com/uc?export=download&id=" + dataID,
        frameworkUrl: "https://drive.google.com/uc?export=download&id=" + frameworkID,
        codeUrl: "https://drive.google.com/uc?export=download&id=" + wasmID,
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Education",
        productName: "ResearchModule",
        productVersion: "1.0",
      };

      startButton.onclick = () => {
        startOverlay.style.display = "none";
        
        // Resume Audio for Edge/Chrome
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        if (audioCtx.state === 'suspended') { audioCtx.resume(); }

        var script = document.createElement("script");
        script.src = "https://drive.google.com/uc?export=download&id=" + loaderID;
        script.onload = () => {
          createUnityInstance(canvas, config, (progress) => {
            // Loading...
          }).then((unityInstance) => {
             console.log("Module Initialized");
          });
        };
        document.body.appendChild(script);
      };
    </script>
</body>
</html>
